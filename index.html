<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡πÄ‡∏Å‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap');

    body {
      font-family: 'Sarabun', sans-serif;
      margin: 0; padding: 0;
      display: flex; justify-content: center;
      background: linear-gradient(135deg, #e3f2fd 0%, #f1f8e9 100%);
      min-height: 100vh;
    }
    #main {
      display: flex;
      width: 95%; max-width: 1200px;
      background: #ffffffcc;
      margin: 40px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.2);
      border-radius: 8px;
      overflow: hidden;
    }

    /* ‡∏ù‡∏±‡πà‡∏á‡πÄ‡∏Å‡∏° */
    #game-area {
      flex: 3; padding: 30px; position: relative;
    }
    #message {
      margin-bottom: 15px;
      font-size: 22px; font-weight: 700;
      color: #2e7d32; height: 28px;
      transition: all 0.3s ease;
    }
    #explanation-box {
      display: none;
      border: 2px dashed #00796b;
      background: #e0f2f1;
      padding: 14px; border-radius: 6px;
      margin-bottom: 25px; line-height: 1.5;
      animation: fadeIn 0.5s ease-out;
    }
    #scramble-container {
      min-height: 120px;
      border: 3px dashed #64b5f6;
      padding: 15px; display: flex;
      flex-wrap: wrap; margin-bottom: 25px;
      background: #e3f2fd; border-radius: 6px;
    }
    .word {
      cursor: move; user-select: none;
      padding: 10px 16px; margin: 6px;
      background: #ffeb3b; border: 2px solid #fbc02d;
      border-radius: 6px; font-size: 18px;
      font-weight: 500; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      transition: transform 0.2s ease;
    }
    .word:hover { transform: scale(1.1); }

    /* ‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡∏±‡∏î‡πÑ‡∏õ */
    #next-btn {
      display: none;
      padding: 12px 26px; font-size: 18px;
      background: #1976d2; color: #fff;
      border: none; border-radius: 6px;
      cursor: pointer; box-shadow: 0 3px 6px rgba(0,0,0,0.3);
      transition: background 0.3s ease;
    }
    #next-btn:hover { background: #1565c0; }

    /* ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤ */
    #home-btn {
      display: inline-block;
      margin-left: 10px;
      padding: 12px 26px; font-size: 18px;
      background: #ff7043; color: #fff;
      border: none; border-radius: 6px;
      cursor: pointer; box-shadow: 0 3px 6px rgba(0,0,0,0.3);
      transition: background 0.3s ease;
    }
    #home-btn:hover { background: #f4511e; }

    /* ‡∏ù‡∏±‡πà‡∏á sidebar */
    #sidebar {
      flex: 1; border-left: 2px solid #ddd;
      padding: 30px 20px; background: #f1f8e9;
    }
    #question-numbers {
      border-bottom: 2px solid #ccc;
      padding-bottom: 12px; margin-bottom: 24px;
    }
    .number {
      width: 34px; height: 34px; line-height: 34px;
      text-align: center; margin: 4px;
      border: 2px solid #9e9e9e; border-radius: 6px;
      display: inline-block; color: #555;
      font-weight: 600; transition: all 0.3s ease;
    }
    .number.active {
      border-color: #388e3c;
      background: #c8e6c9;
      color: #2e7d32;
      transform: scale(1.1);
    }
    .answer {
      margin-bottom: 12px; padding: 8px;
      background: #e8f5e9; border-left: 6px solid #388e3c;
      border-radius: 4px; font-size: 16px;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to   { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div id="main">
    <!-- ‡∏ù‡∏±‡πà‡∏á‡πÄ‡∏Å‡∏° -->
    <div id="game-area">
      <div id="message"></div>
      <div id="explanation-box"></div>
      <div id="scramble-container"></div>
      <button id="next-btn">‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
      <button id="home-btn" onclick="location.href='https://kornvenus.github.io/Thinko-KIDs/'">
        ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
      </button>
    </div>

    <!-- ‡∏ù‡∏±‡πà‡∏á sidebar -->
    <div id="sidebar">
      <div id="question-numbers"></div>
      <div id="completed-answers"></div>
    </div>
  </div>

  <script>
    const sentences = [
      ["‡∏â‡∏±‡∏ô","‡πÑ‡∏õ","‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô","‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô"],
      ["‡∏û‡πà‡∏≠‡πÅ‡∏°‡πà","‡∏û‡∏≤","‡∏â‡∏±‡∏ô","‡πÑ‡∏õ","‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß","‡∏™‡∏ß‡∏ô‡∏™‡∏±‡∏ï‡∏ß‡πå","‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô‡∏ô‡∏µ‡πâ"],
      ["‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ","‡∏≠‡∏≤‡∏Å‡∏≤‡∏®","‡∏£‡πâ‡∏≠‡∏ô","‡∏°‡∏≤‡∏Å"],
      ["‡∏â‡∏±‡∏ô","‡∏ä‡∏≠‡∏ö","‡∏≠‡πà‡∏≤‡∏ô","‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠","‡∏´‡∏•‡∏±‡∏á","‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"],
      ["‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÜ","‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°","‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô","‡∏ó‡∏µ‡πà","‡∏ö‡πâ‡∏≤‡∏ô"],
      ["‡∏Ñ‡∏£‡∏π","‡∏™‡∏≠‡∏ô","‡∏ß‡∏¥‡∏ä‡∏≤","‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå","‡∏≠‡∏¢‡πà‡∏≤‡∏á","‡∏™‡∏ô‡∏∏‡∏Å‡∏™‡∏ô‡∏≤‡∏ô"],
      ["‡∏ô‡∏Å","‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡πâ‡∏ô","‡∏ö‡∏¥‡∏ô","‡∏≠‡∏¢‡∏π‡πà","‡∏ö‡∏ô","‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ","‡∏™‡∏π‡∏á"],
      ["‡πÄ‡∏£‡∏≤","‡πÑ‡∏õ","‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥","‡∏ó‡∏µ‡πà","‡∏™‡∏£‡∏∞","‡∏ó‡∏∏‡∏Å‡∏™‡∏∏‡∏î‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå"],
      ["‡∏£‡∏ñ‡πÄ‡∏°‡∏•‡πå","‡πÅ‡∏•‡πà‡∏ô","‡∏ú‡πà‡∏≤‡∏ô","‡∏ñ‡∏ô‡∏ô","‡∏´‡∏ô‡πâ‡∏≤","‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"],
      ["‡∏•‡∏π‡∏Å‡∏´‡∏°‡∏≤","‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å","‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô","‡πÉ‡∏ô","‡∏™‡∏ß‡∏ô","‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô"]
    ];
    const explanations = [
      { subject:"‡∏â‡∏±‡∏ô", verb:"‡πÑ‡∏õ", object:"‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô" },
      { subject:"‡∏û‡πà‡∏≠‡πÅ‡∏°‡πà", verb:"‡∏û‡∏≤", object:"‡∏â‡∏±‡∏ô‡πÑ‡∏õ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏™‡∏ß‡∏ô‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô‡∏ô‡∏µ‡πâ" },
      { subject:"‡∏≠‡∏≤‡∏Å‡∏≤‡∏®", verb:"‡∏£‡πâ‡∏≠‡∏ô", object:"‡∏°‡∏≤‡∏Å" },
      { subject:"‡∏â‡∏±‡∏ô", verb:"‡∏ä‡∏≠‡∏ö‡∏≠‡πà‡∏≤‡∏ô", object:"‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" },
      { subject:"‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÜ", verb:"‡πÄ‡∏•‡πà‡∏ô", object:"‡πÄ‡∏Å‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡πâ‡∏≤‡∏ô" },
      { subject:"‡∏Ñ‡∏£‡∏π", verb:"‡∏™‡∏≠‡∏ô", object:"‡∏ß‡∏¥‡∏ä‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏ô‡∏∏‡∏Å‡∏™‡∏ô‡∏≤‡∏ô" },
      { subject:"‡∏ô‡∏Å‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡πâ‡∏ô", verb:"‡∏ö‡∏¥‡∏ô‡∏≠‡∏¢‡∏π‡πà", object:"‡∏ö‡∏ô‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡∏™‡∏π‡∏á" },
      { subject:"‡πÄ‡∏£‡∏≤", verb:"‡πÑ‡∏õ‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥", object:"‡∏ó‡∏µ‡πà‡∏™‡∏£‡∏∞‡∏ó‡∏∏‡∏Å‡∏™‡∏∏‡∏î‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå" },
      { subject:"‡∏£‡∏ñ‡πÄ‡∏°‡∏•‡πå", verb:"‡πÅ‡∏•‡πà‡∏ô‡∏ú‡πà‡∏≤‡∏ô", object:"‡∏ñ‡∏ô‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" },
      { subject:"‡∏•‡∏π‡∏Å‡∏´‡∏°‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å", verb:"‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô", object:"‡πÉ‡∏ô‡∏™‡∏ß‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô" }
    ];

    let current = 0;
    const total = sentences.length;
    const numbersContainer = document.getElementById('question-numbers');
    const scrambleContainer = document.getElementById('scramble-container');
    const nextBtn = document.getElementById('next-btn');
    const homeBtn = document.getElementById('home-btn');
    const completedContainer = document.getElementById('completed-answers');
    const messageDiv = document.getElementById('message');
    const explanationBox = document.getElementById('explanation-box');

    init();

    function init() {
      renderNumbers();
      loadQuestion();
    }

    function renderNumbers() {
      numbersContainer.innerHTML = '';
      for (let i = 0; i < total; i++) {
        const num = document.createElement('div');
        num.className = 'number' + (i === current ? ' active' : '');
        num.innerText = i + 1;
        numbersContainer.appendChild(num);
      }
    }

    function shuffleArray(arr) {
      return arr
        .map(v => ({ v, sort: Math.random() }))
        .sort((a, b) => a.sort - b.sort)
        .map(({ v }) => v);
    }

    function loadQuestion() {
      // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï UI
      messageDiv.innerText = '';
      explanationBox.style.display = 'none';
      scrambleContainer.innerHTML = '';
      nextBtn.style.display = 'none';
      // ‡∏õ‡∏∏‡πà‡∏° homeBtn ‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏ô

      renderNumbers();

      // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏õ‡∏∏‡πà‡∏° next
      if (current === total - 1) {
        nextBtn.innerText = '‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å';
        nextBtn.onclick = () => homeBtn.click();
      } else {
        nextBtn.innerText = '‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ';
        nextBtn.onclick = handleNext;
      }

      // ‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏™‡∏î‡∏á
      const words = sentences[current].slice();
      const scrambled = shuffleArray(words);
      scrambled.forEach(word => {
        const span = document.createElement('span');
        span.className = 'word';
        span.draggable = true;
        span.innerText = word;
        addDragHandlers(span);
        scrambleContainer.appendChild(span);
      });
    }

    let dragSrcEl = null;
    function addDragHandlers(elem) {
      elem.addEventListener('dragstart', e => {
        dragSrcEl = elem;
        e.dataTransfer.effectAllowed = 'move';
      });
      elem.addEventListener('dragover', e => {
        e.preventDefault();
        e.dataTransfer.dropEffect = 'move';
      });
      elem.addEventListener('drop', e => {
        e.preventDefault();
        if (dragSrcEl !== elem) {
          [elem.innerText, dragSrcEl.innerText] =
            [dragSrcEl.innerText, elem.innerText];
          checkAnswer();
        }
      });
    }

    function checkAnswer() {
      const arranged = Array.from(scrambleContainer.children)
        .map(el => el.innerText);
      if (arranged.join(' ') === sentences[current].join(' ')) {
        nextBtn.style.display = 'inline-block';
        messageDiv.innerText = '‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß üéâ';
        const exp = explanations[current];
        explanationBox.innerHTML = `
          <strong>‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô:</strong> ${exp.subject}<br>
          <strong>‡∏Å‡∏¥‡∏£‡∏¥‡∏¢‡∏≤:</strong> ${exp.verb}<br>
          <strong>‡∏Å‡∏£‡∏£‡∏°:</strong> ${exp.object}<br>
          ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ ‡∏Ñ‡∏∑‡∏≠${sentences[current].join(' ')}‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏≠‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
        `;
        explanationBox.style.display = 'block';
      }
    }

    function handleNext() {
      const div = document.createElement('div');
      div.className = 'answer';
      div.innerText = sentences[current].join(' ');
      completedContainer.appendChild(div);
      current++;
      loadQuestion();
    }
  </script>
</body>
</html>
